import{inject as e,ref as t,computed as a,watch as o,nextTick as n,resolveComponent as l,resolveDirective as i,createElementBlock as r,openBlock as d,createVNode as c,createBlock as u,createCommentVNode as p,createSlots as s,withCtx as m,withDirectives as f,createTextVNode as v,toDisplayString as h}from"vue";function g(e){if(!e)return"";const t=e.replace(/\D/g,"");return t.length<=5?t:`${t.slice(0,5)}-${t.slice(5,8)}`}function y(e){return e?e.replace(/\D/g,""):""}async function b(e){const t=y(e);if(!function(e){if(!e)return!1;const t=y(e);return 8===t.length&&/^\d{8}$/.test(t)}(t))throw new Error("CEP deve ter 8 dígitos");try{const e=await fetch(`https://viacep.com.br/ws/${t}/json/`);if(!e.ok)throw new Error("Erro ao conectar com o serviço de CEP");const a=await e.json();return a.erro?null:{logradouro:a.logradouro||"",bairro:a.bairro||"",localidade:a.localidade||"",uf:a.uf||"",complemento:a.complemento||""}}catch(e){if(e.message.includes("CEP deve ter"))throw e;throw new Error("Erro ao buscar CEP. Verifique sua conexão.")}}var E=[],C=[];function w(e,t){if(e&&"undefined"!=typeof document){var a,o=!0===t.prepend?"prepend":"append",n=!0===t.singleTag,l="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(n){var i=E.indexOf(l);-1===i&&(i=E.push(l)-1,C[i]={}),a=C[i]&&C[i][o]?C[i][o]:C[i][o]=r()}else a=r();65279===e.charCodeAt(0)&&(e=e.substring(1)),a.styleSheet?a.styleSheet.cssText+=e:a.appendChild(document.createTextNode(e))}function r(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var a=Object.keys(t.attributes),n=0;n<a.length;n++)e.setAttribute(a[n],t.attributes[a[n]]);var i="prepend"===o?"afterbegin":"beforeend";return l.insertAdjacentElement(i,e),e}}w("\n.cep-input-wrapper[data-v-8e59c82a] {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 8px;\n}\n.error-notice[data-v-8e59c82a] {\n\tmargin-top: 8px;\n}\n",{});var x=(e,t)=>{const a=e.__vccOpts||e;for(const[e,o]of t)a[e]=o;return a};const P={class:"cep-input-wrapper"};var F={id:"cep-autofill",name:"Entrada de CEP com Autopreenchimento",icon:"place",description:"Campo de entrada de CEP com máscara e preenchimento automático de endereço via API ViaCEP",component:x({__name:"interface",props:{value:{type:String,default:""},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"00000-000"},autofillEnabled:{type:Boolean,default:!0},streetField:{type:String,default:null},neighborhoodField:{type:String,default:null},cityField:{type:String,default:null},stateField:{type:String,default:null},complementField:{type:String,default:null},overwriteExisting:{type:Boolean,default:!1}},emits:["input","setFieldValue"],setup(E,{emit:C}){const w=E,x=C,F=e("values",t({})),_=t(!1),S=t(""),q=t(null),A=a(()=>g(w.value));function k(e){const t=y(e);q.value=null,S.value="",x("input",t)}return o(()=>w.value,e=>{const t=y(e);8===t.length&&w.autofillEnabled&&!_.value&&async function(e){if(!w.autofillEnabled||_.value)return;if(8!==e.length)return;S.value="",_.value=!0;try{const t=await b(e);if(!t)return q.value=!1,S.value="CEP não encontrado. Verifique o número digitado.",void(_.value=!1);q.value=!0,await async function(e){const t=[{field:w.streetField,value:e.logradouro},{field:w.neighborhoodField,value:e.bairro},{field:w.cityField,value:e.localidade},{field:w.stateField,value:e.uf},{field:w.complementField,value:e.complemento}];for(const e of t)e.field&&e.value&&(!w.overwriteExisting&&F.value[e.field]||(x("setFieldValue",{field:e.field,value:e.value}),await n()))}(t)}catch(e){q.value=!1,S.value=e.message||"Erro ao buscar CEP. Verifique sua conexão."}finally{_.value=!1}}(t)}),(e,t)=>{const a=l("v-icon"),o=l("v-input"),n=l("v-notice"),g=i("tooltip");return d(),r("div",P,[c(o,{"model-value":A.value,"onUpdate:modelValue":k,placeholder:E.placeholder,maxlength:"9",disabled:E.disabled||_.value,loading:_.value,"font-family":"monospace"},s({_:2},[null===q.value||_.value?void 0:{name:"append",fn:m(()=>[q.value?f((d(),u(a,{key:0,name:"check_circle",small:"",style:{color:"var(--theme--success)"}},null,512)),[[g,"CEP encontrado"]]):f((d(),u(a,{key:1,name:"error",small:"",style:{color:"var(--theme--danger)"}},null,512)),[[g,"CEP não encontrado"]])]),key:"0"}]),1032,["model-value","placeholder","disabled","loading"]),S.value?(d(),u(n,{key:0,type:"danger",class:"error-notice"},{default:m(()=>[v(h(S.value),1)]),_:1})):p("v-if",!0)])}}},[["__scopeId","data-v-8e59c82a"]]),options:({collection:e})=>[{field:"placeholder",name:"Placeholder",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"00000-000"}},schema:{default_value:"00000-000"}},{field:"autofillEnabled",name:"Ativar Autopreenchimento",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Buscar endereço automaticamente"}},schema:{default_value:!0}},{field:"streetField",name:"Campo de Logradouro",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Nome do campo (ex: street, logradouro)",trim:!0},note:"Digite o nome do campo que armazena o logradouro/rua"}},{field:"neighborhoodField",name:"Campo de Bairro",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Nome do campo (ex: neighborhood, bairro)",trim:!0},note:"Digite o nome do campo que armazena o bairro"}},{field:"cityField",name:"Campo de Cidade",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Nome do campo (ex: city, cidade)",trim:!0},note:"Digite o nome do campo que armazena a cidade"}},{field:"stateField",name:"Campo de Estado",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Nome do campo (ex: state, uf)",trim:!0},note:"Digite o nome do campo que armazena o estado/UF"}},{field:"complementField",name:"Campo de Complemento",type:"string",meta:{width:"half",interface:"input",options:{placeholder:"Nome do campo (ex: complement, complemento)",trim:!0},note:"Digite o nome do campo que armazena o complemento"}},{field:"overwriteExisting",name:"Sobrescrever Campos Preenchidos",type:"boolean",meta:{width:"half",interface:"boolean",options:{label:"Substituir valores existentes ao buscar CEP"}},schema:{default_value:!1}}],types:["string"]};w("\n.cep-display[data-v-9df2ad01] {\n\tfont-family: var(--theme--fonts--monospace--font-family);\n}\n",{});const _={class:"cep-display"};const S=[F],q=[{id:"cep-display",name:"CEP",icon:"place",description:"Exibe campo de CEP formatado",component:x({props:{value:String},computed:{formattedCEP(){return this.value?g(this.value):"—"}}},[["render",function(e,t,a,o,n,l){return d(),r("div",_,h(l.formattedCEP),1)}],["__scopeId","data-v-9df2ad01"]]),options:null,types:["string"]}],A=[],k=[],D=[],N=[],V=[];export{q as displays,S as interfaces,A as layouts,k as modules,V as operations,D as panels,N as themes};
